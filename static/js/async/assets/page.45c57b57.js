/*! For license information please see page.45c57b57.js.LICENSE.txt */
"use strict";(globalThis.rspackChunkLuckyMoney=globalThis.rspackChunkLuckyMoney||[]).push([["143"],{87028(e,t,r){r.d(t,{A:()=>l});var i=r(9346),a=r(59471);let n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};var o=r(25712);let l=a.forwardRef(function(e,t){return a.createElement(o.A,(0,i.A)({},e,{ref:t,icon:n}))})},72414(e,t,r){r.d(t,{A:()=>l});var i=r(9346),a=r(59471);let n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"};var o=r(25712);let l=a.forwardRef(function(e,t){return a.createElement(o.A,(0,i.A)({},e,{ref:t,icon:n}))})},61484(e,t,r){r.d(t,{A:()=>l});var i=r(9346),a=r(59471);let n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 464H528V448h312v128zm0 264H184V184h656v200H496c-17.7 0-32 14.3-32 32v192c0 17.7 14.3 32 32 32h344v200zM580 512a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"wallet",theme:"outlined"};var o=r(25712);let l=a.forwardRef(function(e,t){return a.createElement(o.A,(0,i.A)({},e,{ref:t,icon:n}))})},96429(e,t,r){r.d(t,{A:()=>a});var i=r(62615);function a(e){let{children:t}=e;return(0,i.jsx)("div",{style:{width:"100%",maxWidth:430,margin:"0 auto",minHeight:"100%",background:"var(--lm-bg-primary)",position:"relative"},children:t})}r(59471)},22853(e,t,r){r.d(t,{A:()=>d});var i=r(62615),a=r(32328),n=r(83729),o=r(87028),l=r(79049);function d(e){let{title:t="",showBack:r=!0,showWallet:d=!0}=e,s=(0,a.Zp)();return(0,i.jsxs)("div",{style:{position:"sticky",top:0,zIndex:50,background:"rgba(255, 250, 245, 0.92)",backdropFilter:"blur(16px)",WebkitBackdropFilter:"blur(16px)",borderBottom:"1px solid rgba(0, 0, 0, 0.04)"},children:[(0,i.jsx)("div",{style:{height:"var(--lm-notch-height)"}}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"36px 1fr auto",alignItems:"center",height:44,padding:"0 12px",gap:8},children:[r&&(0,i.jsx)(n.P.button,{whileTap:{scale:.9},onClick:()=>s(-1),style:{width:32,height:32,borderRadius:"50%",background:"rgba(212, 56, 13, 0.06)",border:"1px solid rgba(212, 56, 13, 0.08)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"var(--lm-red)",fontSize:13,flexShrink:0},children:(0,i.jsx)(o.A,{})}),!r&&(0,i.jsx)("div",{style:{width:32,height:32}}),t&&(0,i.jsx)("h2",{style:{textAlign:"center",fontSize:16,fontWeight:600,color:"var(--lm-text-primary)",margin:0,letterSpacing:.5},children:t}),!t&&(0,i.jsx)("div",{}),d?(0,i.jsx)("div",{style:{justifySelf:"end"},children:(0,i.jsx)(l.pK,{connectText:"\u8FDE\u63A5\u94B1\u5305",style:{height:30,padding:"0 10px",borderRadius:16,border:"1px solid rgba(212,56,13,0.12)",background:"rgba(212,56,13,0.06)",color:"var(--lm-red)",fontSize:12,fontWeight:600,lineHeight:"30px",cursor:"pointer"}})}):(0,i.jsx)("div",{style:{width:88}})]})]})}},70207(e,t,r){r.d(t,{C1:()=>l,H8:()=>s,LT:()=>i,Lz:()=>n,a$:()=>c,k6:()=>d,rJ:()=>o,v1:()=>a});let i="mainnet",a="0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",n="0x6d9fc33611f4881a3f5c0cd4899d95a862236ce52b3a38fef039077b0c5b5834::btc_usdc::BtcUSDC",o="0xbb6828ba12f04b843647d013601f166dec59dcfd061e8230dd59977892dd4f46",l="0xec0b205973baa7b6bea59967ac8c734a5b2b4defb34a262dff6507c3457d5e6f",d=()=>!/^0x0+$/i.test(o)&&!/^0x0+$/i.test(l),s=e=>{let t=e.match(/<(.+)>/);return(null==t?void 0:t[1])??null},c=e=>{let t=e.split("::");return t[t.length-1]||e}},7632(e,t,r){r.r(t),r.d(t,{default:()=>I});var i=r(62615),a=r(59471),n=r(32328),o=r(83729),l=r(9346);let d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"};var s=r(25712),c=a.forwardRef(function(e,t){return a.createElement(s.A,(0,l.A)({},e,{ref:t,icon:d}))});let u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"};var p=a.forwardRef(function(e,t){return a.createElement(s.A,(0,l.A)({},e,{ref:t,icon:u}))});let f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"}}]},name:"undo",theme:"outlined"};var h=a.forwardRef(function(e,t){return a.createElement(s.A,(0,l.A)({},e,{ref:t,icon:f}))}),x=r(61484),g=r(72414),y=r(23176),b=r(79049),m=r(96429),v=r(22853),S=r(26185),w=r(70207);let j=e=>{if("string"==typeof e)return e;if(e&&"object"==typeof e){if("string"==typeof e.id)return e.id;if("string"==typeof e.bytes)return e.bytes.startsWith("0x")?e.bytes:`0x${e.bytes}`}return""},k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;try{let r=BigInt(String(e??"0"));return Number(r)/10**t}catch{return 0}};function I(){let e=(0,n.Zp)(),t=(0,b.YL)(),r=(0,b.eW)(),[l,d]=(0,a.useState)(!0),[s,u]=(0,a.useState)(0),[f,I]=(0,a.useState)(0),[z,F]=(0,a.useState)([]),[C,A]=(0,a.useState)({envelopeCount:0,totalReceived:0,totalSent:0});(0,a.useEffect)(()=>{let e=!0,i=async()=>{if(!t){if(!e)return;u(0),I(0),F([]),A({envelopeCount:0,totalReceived:0,totalSent:0}),d(!1);return}try{d(!0);let[i,a]=await Promise.all([r.getBalance({owner:t.address,coinType:w.v1}),r.getBalance({owner:t.address,coinType:w.Lz})]);if(!e)return;if(u(k(i.totalBalance)),I(k(a.totalBalance)),!(0,w.k6)()){F([]),A({envelopeCount:0,totalReceived:0,totalSent:0}),d(!1);return}let n=await r.queryTransactionBlocks({filter:{FromAddress:t.address},options:{showEvents:!0},order:"descending",limit:40});if(!e)return;let o=n.data.flatMap(e=>((e,t)=>{let r=null==e?void 0:e.events;if(!Array.isArray(r))return[];let i=[],a=(null==e?void 0:e.timestampMs)?new Date(Number(e.timestampMs)).toISOString():new Date().toISOString();for(let n=0;n<r.length;n++){let o=r[n],l=null==o?void 0:o.type,d=(null==o?void 0:o.parsedJson)??{};if("string"==typeof l){if(l.endsWith("::events::LuckyMoneyCreated")){i.push({id:`${e.digest}-created-${n}`,amount:k(d.total_amount),type:"sent",timestamp:a,from:j(d.lucky_money_id)});continue}if(l.endsWith("::events::LuckyMoneyClaimed")){String(d.claimer??"").toLowerCase()===t.toLowerCase()&&i.push({id:`${e.digest}-claimed-${n}`,amount:k(d.amount),type:"received",timestamp:a,from:j(d.lucky_money_id)});continue}l.endsWith("::events::LuckyMoneyRefunded")&&String(d.owner??"").toLowerCase()===t.toLowerCase()&&i.push({id:`${e.digest}-refund-${n}`,amount:k(d.refunded_amount),type:"refunded",timestamp:a,from:j(d.lucky_money_id)})}}return i})(e,t.address)).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),l=o.filter(e=>"received"===e.type).reduce((e,t)=>e+t.amount,0),s=o.filter(e=>"sent"===e.type).reduce((e,t)=>e+t.amount,0),c=o.filter(e=>"sent"===e.type).length;F(o.slice(0,20)),A({envelopeCount:c,totalReceived:l,totalSent:s}),d(!1)}catch(t){if(console.error("Failed to load asset data",t),!e)return;d(!1)}};i();let a=setInterval(async()=>{await new Promise(e=>{setTimeout(e,0)}),i()},15e3);return()=>{e=!1,clearInterval(a)}},[t,r]);let L=(0,a.useMemo)(()=>s+f,[s,f]),W={received:(0,i.jsx)(c,{style:{fontSize:16,color:"#52C41A"}}),sent:(0,i.jsx)(p,{style:{fontSize:16,color:S.I.red500}}),refunded:(0,i.jsx)(h,{style:{fontSize:16,color:S.I.gold500}})},R={received:"\u6536\u5230\u7EA2\u5305",sent:"\u53D1\u51FA\u7EA2\u5305",refunded:"\u9000\u56DE"};return(0,i.jsxs)(m.A,{children:[(0,i.jsx)(v.A,{title:"\u6211\u7684\u8D44\u4EA7"}),(0,i.jsxs)("div",{style:{padding:"8px 20px 100px"},children:[(0,i.jsxs)(o.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{background:S.I.gradientRedSoft,borderRadius:20,padding:"28px 24px 20px",marginBottom:28,boxShadow:"0 8px 32px rgba(212, 56, 13, 0.15)",color:"#FFFFFF"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,fontSize:13,opacity:.85,marginBottom:12},children:[(0,i.jsx)(x.A,{}),"\u603B\u8D44\u4EA7"]}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"baseline",gap:6},children:[(0,i.jsx)("span",{style:{fontSize:38,fontWeight:900,letterSpacing:-1},children:t?L.toFixed(2):"--"}),(0,i.jsx)("span",{style:{fontSize:14,fontWeight:500,opacity:.75},children:"USDC"})]}),(0,i.jsx)("div",{style:{display:"flex",marginTop:20,paddingTop:16,borderTop:"1px solid rgba(255,255,255,0.2)"},children:[{label:"\u7EA2\u5305\u6570\u91CF",value:t?C.envelopeCount:"--"},{label:"\u7D2F\u8BA1\u6536\u5230",value:t?`+${C.totalReceived.toFixed(2)}`:"--",color:"#FFFBE6"},{label:"\u7D2F\u8BA1\u53D1\u51FA",value:t?`-${C.totalSent.toFixed(2)}`:"--",color:"rgba(255,255,255,0.6)"}].map(e=>(0,i.jsxs)("div",{style:{flex:1,textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:18,fontWeight:700,color:e.color||"#FFFFFF"},children:e.value}),(0,i.jsx)("div",{style:{fontSize:11,opacity:.7,marginTop:2},children:e.label})]},e.label))})]}),(0,i.jsxs)(o.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.25},whileTap:{scale:.98},onClick:()=>e("/wishlist"),style:{background:S.I.pureWhite,borderRadius:14,padding:"14px 18px",marginBottom:24,display:"flex",alignItems:"center",gap:12,cursor:"pointer",border:"1.5px solid rgba(212,56,13,0.1)",boxShadow:"0 2px 8px rgba(212,56,13,0.04)"},children:[(0,i.jsx)(g.A,{style:{fontSize:20,color:S.I.red500}}),(0,i.jsx)("div",{style:{flex:1},children:(0,i.jsx)("span",{style:{fontSize:13,color:S.I.textSecondary},children:"\u5FC3\u613F\u5355\u4F59\u989D"})}),(0,i.jsx)("span",{style:{fontSize:16,fontWeight:700,color:S.I.red500},children:"0.00"}),(0,i.jsx)("span",{style:{fontSize:12,color:S.I.textHint},children:"USDC \u203A"})]}),(0,i.jsx)("h3",{style:{fontSize:16,fontWeight:700,color:S.I.textPrimary,margin:"0 0 16px"},children:"\u4EA4\u6613\u8BB0\u5F55"}),!t&&(0,i.jsx)("div",{style:{background:S.I.pureWhite,borderRadius:14,padding:"16px",color:S.I.textHint,fontSize:13,border:"1px solid rgba(0,0,0,0.03)",boxShadow:"var(--lm-shadow-card)"},children:"\u8BF7\u5148\u8FDE\u63A5\u94B1\u5305\u67E5\u770B\u94FE\u4E0A\u8D44\u4EA7\u4E0E\u8BB0\u5F55\u3002"}),t&&l&&(0,i.jsx)("div",{style:{background:S.I.pureWhite,borderRadius:14,padding:"16px",color:S.I.textHint,fontSize:13,border:"1px solid rgba(0,0,0,0.03)",boxShadow:"var(--lm-shadow-card)"},children:"\u6B63\u5728\u52A0\u8F7D\u94FE\u4E0A\u8BB0\u5F55..."}),t&&!l&&0===z.length&&(0,i.jsx)("div",{style:{background:S.I.pureWhite,borderRadius:14,padding:"16px",color:S.I.textHint,fontSize:13,border:"1px solid rgba(0,0,0,0.03)",boxShadow:"var(--lm-shadow-card)"},children:"\u6682\u65E0\u94FE\u4E0A\u7EA2\u5305\u4EA4\u6613\u8BB0\u5F55\u3002"}),t&&z.length>0&&(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:z.map((e,t)=>(0,i.jsxs)(o.P.div,{initial:{opacity:0,y:14},animate:{opacity:1,y:0},transition:{delay:.04*t},style:{background:S.I.pureWhite,borderRadius:14,padding:"14px 16px",display:"flex",alignItems:"center",gap:12,boxShadow:"var(--lm-shadow-card)",border:"1px solid rgba(0,0,0,0.03)"},children:[(0,i.jsx)("div",{style:{width:40,height:40,borderRadius:12,background:"received"===e.type?"rgba(82, 196, 26, 0.08)":"sent"===e.type?S.I.red50:S.I.gold50,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:W[e.type]}),(0,i.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,i.jsx)("div",{style:{fontSize:14,fontWeight:600,color:S.I.textPrimary},children:R[e.type]}),(0,i.jsxs)("div",{style:{fontSize:12,color:S.I.textHint,marginTop:2},children:[(e=>{let t=Math.floor((Date.now()-new Date(e).getTime())/6e4);if(t<60)return`${Math.max(t,1)} \u{5206}\u{949F}\u{524D}`;let r=Math.floor(t/60);return r<24?`${r} \u{5C0F}\u{65F6}\u{524D}`:`${Math.floor(r/24)} \u{5929}\u{524D}`})(e.timestamp),e.from&&` \xb7 ${e.from.slice(0,8)}...`]})]}),(0,i.jsxs)("span",{style:{fontSize:16,fontWeight:700,color:"received"===e.type?"#52C41A":"sent"===e.type?S.I.red500:S.I.gold600,flexShrink:0},children:["sent"===e.type?"-":"+",e.amount.toFixed(2)]})]},e.id))})]}),(0,i.jsx)("div",{style:{position:"sticky",bottom:0,padding:"16px 20px calc(16px + var(--lm-safe-bottom))",background:"rgba(255, 250, 245, 0.9)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)"},children:(0,i.jsxs)(o.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>e("/create"),style:{width:"100%",height:52,borderRadius:26,background:S.I.gradientRedSoft,border:"none",color:"#FFFFFF",fontSize:16,fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8,letterSpacing:2,boxShadow:"0 6px 24px rgba(212, 56, 13, 0.2)"},children:[(0,i.jsx)(y.A,{}),"\u53D1\u7EA2\u5305"]})})]})}}}]);