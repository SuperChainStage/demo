/*! For license information please see page.ad43bad0.js.LICENSE.txt */
"use strict";(globalThis.rspackChunkLuckyMoney=globalThis.rspackChunkLuckyMoney||[]).push([["899"],{26252(e,t,i){i.d(t,{A:()=>l});var r=i(9346),a=i(59471);let n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"};var o=i(25712);let l=a.forwardRef(function(e,t){return a.createElement(o.A,(0,r.A)({},e,{ref:t,icon:n}))})},96429(e,t,i){i.d(t,{A:()=>a});var r=i(62615);function a(e){let{children:t}=e;return(0,r.jsx)("div",{style:{width:"100%",maxWidth:430,margin:"0 auto",minHeight:"100%",background:"var(--lm-bg-primary)",position:"relative"},children:t})}i(59471)},70207(e,t,i){i.d(t,{C1:()=>l,H8:()=>d,LT:()=>r,Lz:()=>n,a$:()=>c,k6:()=>s,rJ:()=>o,v1:()=>a});let r="mainnet",a="0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",n="0x6d9fc33611f4881a3f5c0cd4899d95a862236ce52b3a38fef039077b0c5b5834::btc_usdc::BtcUSDC",o="0xbb6828ba12f04b843647d013601f166dec59dcfd061e8230dd59977892dd4f46",l="0xec0b205973baa7b6bea59967ac8c734a5b2b4defb34a262dff6507c3457d5e6f",s=()=>!/^0x0+$/i.test(o)&&!/^0x0+$/i.test(l),d=e=>{let t=e.match(/<(.+)>/);return(null==t?void 0:t[1])??null},c=e=>{let t=e.split("::");return t[t.length-1]||e}},24567(e,t,i){i.d(t,{LP:()=>n,My:()=>o,po:()=>a});let r=new TextEncoder,a=e=>{var t;if(!(null==(t=globalThis.crypto)?void 0:t.getRandomValues))throw Error("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 Web Crypto\uFF0C\u65E0\u6CD5\u751F\u6210\u968F\u673A\u6570");let i=new Uint8Array(e);return globalThis.crypto.getRandomValues(i),i},n=async e=>{var t;if(!(null==(t=globalThis.crypto)?void 0:t.subtle))throw Error("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 Web Crypto\uFF0C\u65E0\u6CD5\u8BA1\u7B97\u54C8\u5E0C");let i="string"==typeof e?r.encode(e):e;return new Uint8Array(await globalThis.crypto.subtle.digest("SHA-256",i))},o=e=>Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("")},94924(e,t,i){i.r(t),i.d(t,{default:()=>A});var r=i(62615),a=i(59471),n=i(32328),o=i(5247),l=i(83729),s=i(23176),d=i(9346);let c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 533h-48.1c-4.2 0-7.8 3.2-8.1 7.4C604 589.9 562.5 629 512 629s-92.1-39.1-95.8-88.6c-.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 00-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 00-8-8.4z"}}]},name:"smile",theme:"outlined"};var p=i(25712),g=a.forwardRef(function(e,t){return a.createElement(p.A,(0,d.A)({},e,{ref:t,icon:c}))}),u=i(26252);let y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM512 533c-85.5 0-155.6 67.3-160 151.6a8 8 0 008 8.4h48.1c4.2 0 7.8-3.2 8.1-7.4C420 636.1 461.5 597 512 597s92.1 39.1 95.8 88.6c.3 4.2 3.9 7.4 8.1 7.4H664a8 8 0 008-8.4C667.6 600.3 597.5 533 512 533z"}}]},name:"frown",theme:"outlined"};var h=a.forwardRef(function(e,t){return a.createElement(p.A,(0,d.A)({},e,{ref:t,icon:y}))}),x=i(56090),b=i(79049),f=i(32135),m=i(96429),v=i(26185);function j(e){let{onOpen:t}=e;return(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px 0"},children:(0,r.jsxs)(l.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:15},style:{width:240,height:320,borderRadius:20,background:v.I.gradientRedDown,position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",boxShadow:"0 12px 48px rgba(212, 56, 13, 0.25)",overflow:"hidden"},children:[(0,r.jsx)("div",{style:{position:"absolute",top:"38%",left:0,right:0,height:2,background:"linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.4), transparent)"}}),(0,r.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,height:"40%",background:"rgba(0, 0, 0, 0.1)",borderRadius:"20px 20px 0 0"}}),(0,r.jsx)(l.P.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:t,style:{width:80,height:80,borderRadius:"50%",background:v.I.gradientGold,border:"3px solid rgba(255, 255, 255, 0.4)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",zIndex:10,boxShadow:"0 4px 20px rgba(250, 173, 20, 0.4)"},children:(0,r.jsx)("span",{style:{fontSize:32,fontWeight:900,color:"#A8071A"},children:"\u958B"})}),(0,r.jsx)(l.P.p,{animate:{opacity:[.5,1,.5]},transition:{repeat:1/0,duration:2},style:{color:"rgba(255, 255, 255, 0.7)",fontSize:13,fontWeight:500,marginTop:14,letterSpacing:2,position:"relative",zIndex:10},children:"\u70B9\u51FB\u5F00\u542F"}),(0,r.jsx)("div",{style:{position:"absolute",bottom:16,display:"flex",gap:4},children:[void 0,void 0,void 0].map((e,t)=>(0,r.jsx)("div",{style:{width:4,height:4,borderRadius:"50%",background:"rgba(255, 215, 0, 0.5)"}},t))})]})})}let w=(e,t)=>Math.random()*(t-e)+e;function S(e){let{visible:t,amount:i,totalSaved:n,onClose:s}=e,[d,c]=(0,a.useState)("idle"),[p,g]=(0,a.useState)(0),u=(0,a.useMemo)(()=>Array.from({length:18},(e,t)=>({id:t,startX:w(-160,160),startY:w(-340,-200),delay:w(.05,.7),size:w(16,30),rotation:w(-360,360)})),[t]),y=(0,a.useMemo)(()=>Array.from({length:24},(e,t)=>({id:t,x:w(-180,180),y:w(-280,200),delay:w(.2,1.6),size:w(2,6),duration:w(.6,1.2)})),[t]),h=(0,a.useMemo)(()=>Array.from({length:8},(e,t)=>({id:t,x:w(-30,30),size:w(3,7),delay:w(.3,1.5),drift:w(-10,10)})),[t]);return(0,a.useEffect)(()=>{if(!t){c("idle"),g(0);return}c("stars");let e=setTimeout(()=>c("glow"),1200),i=setTimeout(()=>c("done"),1800),r=setTimeout(()=>s(),4500);return()=>{clearTimeout(e),clearTimeout(i),clearTimeout(r)}},[t,s]),(0,a.useEffect)(()=>{if("glow"!==d&&"done"!==d)return;let e=n-i,t=(n-e)/32,r=e,a=setInterval(()=>{(r+=t)>=n&&(r=n,clearInterval(a)),g(Number(r.toFixed(2)))},25);return()=>clearInterval(a)},[d,n,i]),(0,r.jsx)(o.N,{children:t&&(0,r.jsxs)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},onClick:s,style:{position:"fixed",inset:0,zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"radial-gradient(ellipse at center, rgba(30,20,10,0.85) 0%, rgba(0,0,0,0.9) 100%)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)"},children:[y.map(e=>(0,r.jsx)(l.P.div,{initial:{opacity:0,scale:0},animate:{opacity:[0,1,0],scale:[0,1,0]},transition:{duration:e.duration,delay:e.delay,repeat:2,repeatDelay:w(.3,.8)},style:{position:"absolute",top:"50%",left:"50%",width:e.size,height:e.size,borderRadius:"50%",background:"#FFD700",boxShadow:`0 0 ${2*e.size}px ${e.size}px rgba(255,215,0,0.4)`,transform:`translate(calc(-50% + ${e.x}px), calc(-50% + ${e.y}px))`,pointerEvents:"none"}},`sp-${e.id}`)),(0,r.jsxs)(l.P.div,{initial:{y:80,scale:.5,opacity:0},animate:{y:0,scale:1,opacity:1},transition:{type:"spring",stiffness:180,damping:16},style:{position:"relative",width:140,height:200,marginBottom:24},children:[(0,r.jsxs)("div",{style:{position:"absolute",bottom:0,left:"50%",transform:"translateX(-50%)",width:110,height:150,borderRadius:"18px 18px 44px 44px",background:"linear-gradient(135deg, rgba(255,255,255,0.22) 0%, rgba(255,255,255,0.06) 100%)",border:"1.5px solid rgba(255,255,255,0.25)",boxShadow:"inset 0 0 24px rgba(255,255,255,0.08), 0 10px 40px rgba(0,0,0,0.3)",overflow:"hidden"},children:[(0,r.jsx)("div",{style:{position:"absolute",top:14,left:12,width:6,height:55,borderRadius:3,background:"linear-gradient(180deg, rgba(255,255,255,0.45) 0%, rgba(255,255,255,0) 100%)"}}),(0,r.jsx)("div",{style:{position:"absolute",top:20,right:14,width:4,height:30,borderRadius:2,background:"linear-gradient(180deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 100%)"}}),(0,r.jsxs)(l.P.div,{initial:{height:0},animate:"glow"===d||"done"===d?{height:"35%"}:{height:0},transition:{duration:1,ease:"easeOut"},style:{position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(0deg, #FFD700 0%, #FFAA00 40%, rgba(255,215,0,0.5) 80%, rgba(255,215,0,0.15) 100%)",borderRadius:"0 0 42px 42px",overflow:"hidden"},children:[(0,r.jsx)(l.P.div,{animate:{x:[-60,60,-60],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},style:{position:"absolute",inset:0,background:"linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.4) 50%, transparent 100%)"}}),h.map(e=>(0,r.jsx)(l.P.div,{initial:{y:0,x:e.x,opacity:0},animate:{y:-60,x:e.x+e.drift,opacity:[0,.8,0]},transition:{duration:1.5,delay:e.delay+1.2,repeat:1/0,repeatDelay:w(.5,1.5)},style:{position:"absolute",bottom:4,left:"50%",width:e.size,height:e.size,borderRadius:"50%",background:"radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(255,215,0,0.6) 100%)",boxShadow:"0 0 4px rgba(255,215,0,0.5)",pointerEvents:"none"}},`gp-${e.id}`))]})]}),(0,r.jsx)("div",{style:{position:"absolute",top:0,left:"50%",transform:"translateX(-50%)",width:42,height:55,borderRadius:"10px 10px 0 0",background:"linear-gradient(135deg, rgba(255,255,255,0.18) 0%, rgba(255,255,255,0.04) 100%)",border:"1.5px solid rgba(255,255,255,0.25)",borderBottom:"none"}}),(0,r.jsx)("div",{style:{position:"absolute",top:-10,left:"50%",transform:"translateX(-50%)",width:52,height:18,borderRadius:9,background:"linear-gradient(180deg, #D4A04A 0%, #B8862D 100%)",boxShadow:"0 3px 10px rgba(0,0,0,0.4), inset 0 1px 2px rgba(255,255,255,0.2)"}}),u.map(e=>(0,r.jsx)(l.P.div,{initial:{x:e.startX,y:e.startY,scale:1.4,opacity:0,rotate:e.rotation},animate:{x:0,y:30,scale:[1.4,1,.3],opacity:[0,1,1,.7,0],rotate:0},transition:{duration:.9,delay:e.delay,ease:[.22,1,.36,1]},style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",fontSize:e.size,pointerEvents:"none",zIndex:10,filter:"drop-shadow(0 0 6px rgba(255,215,0,0.6))"},children:"\u2B50"},e.id)),(0,r.jsx)(o.N,{children:("glow"===d||"done"===d)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.P.div,{initial:{opacity:0,scale:.5},animate:{opacity:[0,.9,.4,.6],scale:[.5,1.4,1.1,1.2]},transition:{duration:1.5,repeat:1/0,repeatType:"reverse",repeatDelay:.5},style:{position:"absolute",inset:-40,borderRadius:"50%",background:"radial-gradient(circle, rgba(255,215,0,0.35) 0%, rgba(255,170,0,0.1) 50%, transparent 75%)",pointerEvents:"none"}}),(0,r.jsx)(l.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:[0,.5,.2],scale:[.8,1.6,1.3]},transition:{duration:1.8},style:{position:"absolute",inset:-60,borderRadius:"50%",background:"radial-gradient(circle, rgba(255,215,0,0.15) 0%, transparent 70%)",pointerEvents:"none"}})]})})]}),(0,r.jsx)(o.N,{children:("glow"===d||"done"===d)&&(0,r.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},style:{textAlign:"center"},children:[(0,r.jsx)("p",{style:{fontSize:14,color:"rgba(255,255,255,0.65)",margin:"0 0 6px",letterSpacing:2},children:"\u5DF2\u8F6C\u5165\u5FC3\u613F\u5355"}),(0,r.jsxs)("p",{style:{fontSize:40,fontWeight:900,color:"#FFD700",margin:"0 0 6px",textShadow:"0 0 20px rgba(255,215,0,0.5), 0 2px 12px rgba(255,170,0,0.3)",letterSpacing:-1},children:["+",i.toFixed(2)]}),(0,r.jsxs)("p",{style:{fontSize:14,color:"rgba(255,255,255,0.4)",margin:0},children:["\u5FC3\u613F\u5B58\u94B1\u7F50\uFF1A",p.toFixed(2)," USDC"]})]})}),"done"===d&&(0,r.jsx)(l.P.p,{initial:{opacity:0},animate:{opacity:.4},transition:{delay:.6},style:{position:"absolute",bottom:60,fontSize:12,color:"rgba(255,255,255,0.35)"},children:"\u70B9\u51FB\u4EFB\u610F\u5904\u5173\u95ED"})]})})}var C=i(70207),z=i(24567);let I=e=>new Promise(t=>{setTimeout(t,e)}),k=e=>{let t=(null==e?void 0:e.message)||"\u9886\u53D6\u5931\u8D25",i=t.match(/,\s*(\d+)\)/),r=i?Number.parseInt(i[1],10):-1;return 5===r?"\u7EA2\u5305\u5DF2\u88AB\u9886\u5B8C":6===r?"\u7EA2\u5305\u5DF2\u8FC7\u671F":10===r?"\u4F60\u5DF2\u7ECF\u9886\u53D6\u8FC7\u8FD9\u4E2A\u7EA2\u5305":8===r?"\u9886\u53D6\u51ED\u8BC1\u6821\u9A8C\u5931\u8D25":0===r?"\u5408\u7EA6\u5F53\u524D\u5DF2\u6682\u505C":t};function A(){let e=(0,n.Zp)(),{id:t}=(0,n.g)(),i=(0,b.YL)(),d=(0,b.eW)(),{mutate:c}=(0,b.Fp)(),[p,y]=(0,a.useState)("loading"),[w,A]=(0,a.useState)(null),[F,R]=(0,a.useState)(""),[P,T]=(0,a.useState)(0),[D,E]=(0,a.useState)(""),[W,B]=(0,a.useState)(!1),[M,L]=(0,a.useState)(!1),$=(0,a.useCallback)(()=>{B(!0)},[]),H=(0,a.useCallback)(()=>{B(!1),L(!0);let e=(null==w?void 0:w.coinSymbol)??"USDC";x.Ay.success(`\u{5DF2}\u{8F6C}\u{5165}\u{5FC3}\u{613F}\u{5355} ${P.toFixed(2)} ${e}`)},[P,null==w?void 0:w.coinSymbol]);(0,a.useEffect)(()=>{let e=!0,i=async()=>{if(!t){E("\u7EA2\u5305\u94FE\u63A5\u65E0\u6548"),y("error");return}if(!(0,C.k6)()){E("\u5408\u7EA6\u5730\u5740\u672A\u914D\u7F6E\uFF0C\u8BF7\u5148\u8865\u5168\u94FE\u4E0A\u914D\u7F6E"),y("error");return}let i="u"<typeof window?"":window.location.hash.replace(/^#/,"").trim();R(i);try{let r=(await d.getObject({id:t,options:{showType:!0,showContent:!0}})).data;if(!(null==r?void 0:r.type)||!(null==r?void 0:r.content))throw Error("\u7EA2\u5305\u4E0D\u5B58\u5728\u6216\u5DF2\u88AB\u5220\u9664");if(!r.type.includes("::core::LuckyMoney<"))throw Error("\u5BF9\u8C61\u7C7B\u578B\u4E0D\u662F LuckyMoney \u7EA2\u5305");let a=(0,C.H8)(r.type);if(!a)throw Error("\u65E0\u6CD5\u89E3\u6790\u7EA2\u5305\u5E01\u79CD\u7C7B\u578B");let n=(e=>{if(!e||"object"!=typeof e||"moveObject"!==e.dataType)return null;let t=e.fields;return t&&"object"==typeof t?t.fields??t:null})(r.content);if(!n)throw Error("\u65E0\u6CD5\u89E3\u6790\u7EA2\u5305\u5BF9\u8C61\u5B57\u6BB5");let o=Number(n.remaining_count??0),l=Number(n.total_count??0),s=Number(n.expire_time??0),c=await d.getCoinMetadata({coinType:a}).catch(()=>null),p=(null==c?void 0:c.decimals)??6,g=(null==c?void 0:c.symbol)||(0,C.a$)(a);if(!e)return;if(A({id:t,coinType:a,coinSymbol:g,coinDecimals:p,totalCount:l,remainingCount:o,expireTimeMs:s}),!i){E("\u94FE\u63A5\u7F3A\u5C11 secret\uFF0C\u65E0\u6CD5\u9886\u53D6\u7EA2\u5305"),y("error");return}if(o<=0){E("\u7EA2\u5305\u5DF2\u88AB\u9886\u5B8C"),y("error");return}if(s>0&&Date.now()>=s){E("\u7EA2\u5305\u5DF2\u8FC7\u671F"),y("error");return}y("ready")}catch(t){if(!e)return;console.error(t),E((null==t?void 0:t.message)||"\u7EA2\u5305\u4E0D\u5B58\u5728\u6216\u5DF2\u8FC7\u671F"),y("error")}};return y("loading"),i(),()=>{e=!1}},[t,d]);let N=async()=>{if(!i)return void x.Ay.warning("\u8BF7\u5148\u8FDE\u63A5\u94B1\u5305");if(!w)return void x.Ay.error("\u7EA2\u5305\u4FE1\u606F\u52A0\u8F7D\u5931\u8D25");if(!F)return void x.Ay.error("\u94FE\u63A5\u7F3A\u5C11 secret\uFF0C\u65E0\u6CD5\u9886\u53D6");y("opening");try{let e=new f.Z;e.setSender(i.address);let t=`${w.id}:${i.address.toLowerCase()}:${F}`,r=await (0,z.LP)(t),[a]=e.moveCall({target:`${C.rJ}::core::claim`,typeArguments:[w.coinType],arguments:[e.object(C.C1),e.object(w.id),e.pure.vector("u8",[]),e.pure.vector("u8",[]),e.pure.vector("u8",Array.from(r)),e.object("0x8"),e.object("0x6")]});e.transferObjects([a],i.address),c({transaction:e},{onSuccess:async e=>{try{var t,r,a,n,o;let l=null;for(let t=0;t<10&&!(((null==(l=await d.getTransactionBlock({digest:e.digest,options:{showEvents:!0,showBalanceChanges:!0}}))||null==(a=l.events)?void 0:a.length)??0)>0)&&!(((null==l||null==(n=l.balanceChanges)?void 0:n.length)??0)>0);t++)await I(1e3);let s=BigInt(0),c=null==l||null==(t=l.events)?void 0:t.find(e=>"string"==typeof(null==e?void 0:e.type)&&e.type.endsWith("::events::LuckyMoneyClaimed")),p=null==c||null==(r=c.parsedJson)?void 0:r.amount;if("string"==typeof p?s=BigInt(p):"number"==typeof p&&(s=BigInt(p)),s===BigInt(0)){let e=null==l||null==(o=l.balanceChanges)?void 0:o.find(e=>{var t;let r=null==e||null==(t=e.owner)?void 0:t.AddressOwner;if(!r||r.toLowerCase()!==i.address.toLowerCase()||e.coinType!==w.coinType)return!1;try{return BigInt(e.amount)>BigInt(0)}catch{return!1}});(null==e?void 0:e.amount)&&(s=BigInt(e.amount))}let g=Number(s)/10**w.coinDecimals;T(g),y("success")}catch(e){console.error("Failed to parse claim result:",e),E("\u9886\u53D6\u6210\u529F\uFF0C\u4F46\u89E3\u6790\u91D1\u989D\u5931\u8D25"),y("error")}},onError:e=>{console.error(e),y("ready"),x.Ay.error(k(e))}})}catch(e){console.error(e),y("ready"),x.Ay.error(k(e))}};return(0,r.jsxs)(m.A,{children:[(0,r.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"calc(var(--lm-notch-height) + 20px) 20px 40px",position:"relative",overflow:"hidden"},children:[(0,r.jsx)("div",{style:{position:"absolute",top:"calc(var(--lm-notch-height) + 6px)",right:16,zIndex:10},children:(0,r.jsx)(b.pK,{connectText:"\u8FDE\u63A5\u94B1\u5305",style:{height:32,padding:"0 10px",borderRadius:16,border:"1px solid rgba(212,56,13,0.12)",background:"rgba(255,255,255,0.8)",color:v.I.red500,fontSize:12,fontWeight:600,cursor:"pointer"}})}),(0,r.jsx)("div",{style:{position:"absolute",top:-200,left:"50%",transform:"translateX(-50%)",width:600,height:400,borderRadius:"50%",background:v.I.gradientRedDown,opacity:.05,pointerEvents:"none"}}),(0,r.jsxs)(o.N,{mode:"wait",children:["loading"===p&&(0,r.jsxs)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{textAlign:"center"},children:[(0,r.jsx)(l.P.div,{animate:{rotate:360},transition:{repeat:1/0,duration:2,ease:"linear"},style:{width:56,height:56,borderRadius:"50%",background:v.I.gradientRedSoft,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",boxShadow:"0 4px 20px rgba(212, 56, 13, 0.2)"},children:(0,r.jsx)(s.A,{style:{fontSize:24,color:"#FFF"}})}),(0,r.jsx)("p",{style:{color:v.I.textSecondary,fontSize:14},children:"\u6B63\u5728\u52A0\u8F7D\u94FE\u4E0A\u7EA2\u5305..."})]},"loading"),"ready"===p&&w&&(0,r.jsxs)(l.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[(0,r.jsx)("h2",{style:{fontSize:20,fontWeight:700,color:v.I.red500,margin:"0 0 4px"},children:"\u4F60\u6536\u5230\u4E00\u4E2A\u7EA2\u5305"}),(0,r.jsxs)("p",{style:{fontSize:13,color:v.I.textHint,margin:"0 0 8px"},children:["\u5269\u4F59 ",w.remainingCount,"/",w.totalCount," \u4EFD"]}),(0,r.jsxs)("p",{style:{fontSize:12,color:v.I.textHint,margin:"0 0 28px"},children:["\u5E01\u79CD: ",w.coinSymbol]}),(0,r.jsx)(j,{onOpen:N})]},"ready"),"opening"===p&&(0,r.jsxs)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{textAlign:"center"},children:[(0,r.jsx)(l.P.div,{animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:.6},style:{width:64,height:64,borderRadius:"50%",background:v.I.gradientRedSoft,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",boxShadow:"0 4px 20px rgba(212, 56, 13, 0.25)"},children:(0,r.jsx)(s.A,{style:{fontSize:28,color:"#FFF"}})}),(0,r.jsx)("p",{style:{color:v.I.textSecondary,fontSize:14},children:"\u8BF7\u5728\u94B1\u5305\u4E2D\u786E\u8BA4\u4EA4\u6613..."})]},"opening"),"success"===p&&w&&(0,r.jsxs)(l.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},style:{textAlign:"center",width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,r.jsx)(l.P.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,damping:12},children:(0,r.jsx)(g,{style:{fontSize:56,color:v.I.gold500,marginBottom:16}})}),(0,r.jsx)("h2",{style:{fontSize:20,fontWeight:700,color:v.I.textPrimary,margin:"0 0 20px"},children:"\u606D\u559C\u53D1\u8D22\uFF01"}),(0,r.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{background:v.I.gradientRedSoft,borderRadius:20,padding:"28px 20px",marginBottom:28,boxShadow:"0 8px 32px rgba(212, 56, 13, 0.15)",color:"#FFFFFF"},children:[(0,r.jsx)("p",{style:{fontSize:13,opacity:.8,margin:"0 0 8px"},children:"\u83B7\u5F97\u7EA2\u5305"}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"center",gap:6},children:[(0,r.jsx)("span",{style:{fontSize:40,fontWeight:900},children:P.toFixed(2)}),(0,r.jsx)("span",{style:{fontSize:16,opacity:.8},children:w.coinSymbol})]})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:12,flexDirection:"column",width:"100%",maxWidth:260,alignItems:"center"},children:[!M&&(0,r.jsxs)(l.P.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.45},whileTap:{scale:.97},onClick:$,style:{width:"100%",height:48,borderRadius:24,background:v.I.gradientRedSoft,border:"none",color:"#FFFFFF",fontSize:15,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8,boxShadow:"0 4px 16px rgba(250, 173, 20, 0.3)"},children:[(0,r.jsx)(u.A,{})," \u8F6C\u5165\u5FC3\u613F\u5355"]}),M&&(0,r.jsx)(l.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{fontSize:13,color:v.I.red500,fontWeight:500,padding:"10px 0"},children:"\u2B50 \u5DF2\u8F6C\u5165\u5FC3\u613F\u5355"}),(0,r.jsx)(l.P.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.55},whileTap:{scale:.97},onClick:()=>e("/"),style:{width:"100%",height:48,borderRadius:24,background:v.I.pureWhite,border:"1.5px solid rgba(212, 56, 13, 0.12)",color:v.I.red500,fontSize:15,fontWeight:600,cursor:"pointer",boxShadow:"var(--lm-shadow-sm)"},children:"\u8FD4\u56DE\u9996\u9875"})]})]},"success"),"error"===p&&(0,r.jsxs)(l.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{textAlign:"center",width:"100%",maxWidth:320},children:[(0,r.jsx)(h,{style:{fontSize:56,color:v.I.textHint,marginBottom:16}}),(0,r.jsx)("h2",{style:{fontSize:18,fontWeight:600,color:v.I.textPrimary,margin:"0 0 8px"},children:"\u65E0\u6CD5\u9886\u53D6"}),(0,r.jsx)("p",{style:{fontSize:14,color:v.I.textHint,margin:"0 0 24px",lineHeight:1.6},children:D}),(0,r.jsxs)("div",{style:{display:"flex",gap:10,justifyContent:"center"},children:[(0,r.jsx)(l.P.button,{whileTap:{scale:.97},onClick:()=>e("/"),style:{height:44,borderRadius:22,background:"rgba(0,0,0,0.04)",border:"none",color:v.I.textSecondary,fontSize:14,fontWeight:500,cursor:"pointer",padding:"0 24px"},children:"\u8FD4\u56DE\u9996\u9875"}),w&&w.remainingCount>0&&(0,r.jsx)(l.P.button,{whileTap:{scale:.97},onClick:()=>y("ready"),style:{height:44,borderRadius:22,background:v.I.gradientRedSoft,border:"none",color:"#FFFFFF",fontSize:14,fontWeight:600,cursor:"pointer",padding:"0 24px"},children:"\u91CD\u8BD5\u9886\u53D6"})]})]},"error")]})]}),(0,r.jsx)(S,{visible:W,amount:P,totalSaved:P,onClose:H})]})}}}]);